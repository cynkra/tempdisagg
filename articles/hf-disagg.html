<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Temporal Disaggregation to High-Frequency • tempdisagg</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Temporal Disaggregation to High-Frequency">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tempdisagg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/hf-disagg.html">Temporal Disaggregation to High-Frequency</a></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Temporal Disaggregation of Time Series</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christophsax/tempdisagg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Temporal Disaggregation to High-Frequency</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/christophsax/tempdisagg/blob/main/vignettes/hf-disagg.Rmd" class="external-link"><code>vignettes/hf-disagg.Rmd</code></a></small>
      <div class="d-none name"><code>hf-disagg.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="convert-between-any-frequency">Convert between any frequency<a class="anchor" aria-label="anchor" href="#convert-between-any-frequency"></a>
</h2>
<p>Since version 1.0, tempdisagg can convert between most frequencies,
e.g., it can disaggregate a monthly series to daily. It is no longer
restricted to regular conversions, where each low frequency period had
the same number of high frequency periods. Instead, a low frequency
period (e.g. month) can contain any number of high-frequency periods
(e.g. 31, 28 or 29 days). Thanks to Roger Kissling and Stella Sim who
have suggested this idea.</p>
<p>We can not only convert months to days, but also years to days, weeks
to seconds, or academic years to seconds, or lunar years to hours, … The
downside is that the computation time depends on the number of
observations. Thus, for longer high-frequency series, the computation
may take a while.</p>
</div>
<div class="section level2">
<h2 id="quarterly-to-daily-disaggregation">Quarterly to daily disaggregation<a class="anchor" aria-label="anchor" href="#quarterly-to-daily-disaggregation"></a>
</h2>
<p>In the following, we try to disaggregate quarterly GDP of Switzerland
to a hypothetical daily GDP series. The example series are shipped with
the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://journal.r-project.org/archive/2013-2/sax-steiner.pdf" class="external-link">tempdisagg</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tempdisagg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gdp.q</span><span class="op">)</span></span>
<span><span class="co">#&gt;         time    value</span></span>
<span><span class="co">#&gt; 1 2005-01-01 133101.3</span></span>
<span><span class="co">#&gt; 2 2005-04-01 136320.4</span></span>
<span><span class="co">#&gt; 3 2005-07-01 137693.7</span></span>
<span><span class="co">#&gt; 4 2005-10-01 139475.9</span></span>
<span><span class="co">#&gt; 5 2006-01-01 139204.7</span></span>
<span><span class="co">#&gt; 6 2006-04-01 141112.5</span></span></code></pre></div>
<p>Because we are dealing with daily data, we keep the data in a
<code>data.frame</code>, rather than in a <code>ts</code> object. Other
time series objects, such as <code>xts</code> and <code>tsibble</code>,
are possible as well. For conversion and visualization, we use the <a href="https://docs.ropensci.org/tsbox/" class="external-link">tsbox</a> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tsbox/" class="external-link">tsbox</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_plot.html" class="external-link">ts_plot</a></span><span class="op">(</span><span class="va">gdp.q</span>, title <span class="op">=</span> <span class="st">"Swiss GDP"</span>, subtitle <span class="op">=</span> <span class="st">"real, not seasonally adjusted"</span><span class="op">)</span></span></code></pre></div>
<p><img src="hf-disagg_files/figure-html/unnamed-chunk-3-1.png" width="681.6"></p>
</div>
<div class="section level2">
<h2 id="no-indicator">No indicator<a class="anchor" aria-label="anchor" href="#no-indicator"></a>
</h2>
<p>For models without an indicator series, <code>method = "fast"</code>
uses the Chow-Lin method with a <em>rho</em> parameter value very close
to 1. This is numerically close to the theoretically preferable
Denton-Cholette method but much faster. Faster, as stated above, has a
relative meaning; the following calculation still takes a few
seconds:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m.d.noind</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td.html">td</a></span><span class="op">(</span><span class="va">gdp.q</span> <span class="op">~</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="st">"daily"</span>, method <span class="op">=</span> <span class="st">"fast"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.d.noind</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; td(formula = gdp.q ~ 1, to = "daily", method = "fast")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;      Min       1Q   Median       3Q      Max </span></span>
<span><span class="co">#&gt; -20275.5  -6704.0    371.7  10125.2  22872.8 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)   </span></span>
<span><span class="co">#&gt; (Intercept)   1704.2      517.6   3.292   0.0017 **</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'chow-lin-fixed' disaggregation with 'sum' conversion</span></span>
<span><span class="co">#&gt; 59 low-freq. obs. converted to 5386 high-freq. obs.</span></span>
<span><span class="co">#&gt; Adjusted R-squared: 0.09057  AR1-Parameter:     1</span></span></code></pre></div>
<p>Because daily GDP is much lower than monthly GDP, we scale both
series to the same mean and standard deviation:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp.d.noind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">m.d.noind</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_plot.html" class="external-link">ts_plot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_scale.html" class="external-link">ts_scale</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_c.html" class="external-link">ts_c</a></span><span class="op">(</span><span class="va">gdp.d.noind</span>, <span class="va">gdp.q</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Daily disaggregated GDP"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"no indicator"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="hf-disagg_files/figure-html/unnamed-chunk-5-1.png" width="681.6"></p>
<p>Like with all disaggregation methods in tempdisagg, the resulting
series fulfills the aggregation constraint:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_frequency.html" class="external-link">ts_frequency</a></span><span class="op">(</span><span class="va">gdp.d.noind</span>, <span class="st">"quarter"</span>, aggregate <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>, <span class="va">gdp.q</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="stock-market-data-as-an-indicator">Stock market data as an indicator<a class="anchor" aria-label="anchor" href="#stock-market-data-as-an-indicator"></a>
</h2>
<p>For a more refined disaggregation, one or several indicator series
may be used. In the following, we use Swiss stock market data to
disaggregate GDP. Data of the stock market index, the SMI, is also
included in tempdisagg:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_plot.html" class="external-link">ts_plot</a></span><span class="op">(</span><span class="va">spi.d</span>, title <span class="op">=</span> <span class="st">"Swiss Performance Index"</span>, subtitle <span class="op">=</span> <span class="st">"daily values, interpolated"</span><span class="op">)</span></span></code></pre></div>
<p><img src="hf-disagg_files/figure-html/unnamed-chunk-7-1.png" width="681.6"></p>
<p>Weekend and holiday values have been interpolated, because
<code>td</code> does not allow the presence of missing values. For how
to interpolate the raw data, see <code><a href="../reference/spi.d.html">?spi.d</a></code>.</p>
<p>The following uses the Chow-Lin method to disaggregate the series. A
high <em>rho</em> parameter takes into account that the two series are
unlikely to be co-integrated.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m.d.stocks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td.html">td</a></span><span class="op">(</span><span class="va">gdp.q</span> <span class="op">~</span> <span class="va">spi.d</span>, method <span class="op">=</span> <span class="st">"chow-lin-fixed"</span>, fixed.rho <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m.d.stocks</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; td(formula = gdp.q ~ spi.d, method = "chow-lin-fixed", fixed.rho = 0.9)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;    Min     1Q Median     3Q    Max </span></span>
<span><span class="co">#&gt; -10656  -1760   1076   3796   8891 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept) 1.320e+03  2.856e+01   46.22   &lt;2e-16 ***</span></span>
<span><span class="co">#&gt; spi.d       5.512e-02  3.735e-03   14.76   &lt;2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'chow-lin-fixed' disaggregation with 'sum' conversion</span></span>
<span><span class="co">#&gt; 59 low-freq. obs. converted to 5493 high-freq. obs.</span></span>
<span><span class="co">#&gt; Adjusted R-squared: 0.7928   AR1-Parameter:   0.9</span></span></code></pre></div>
<p>This results in a much more volatile estimation of daily GDP:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp.d.stocks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">m.d.stocks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_plot.html" class="external-link">ts_plot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_scale.html" class="external-link">ts_scale</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_c.html" class="external-link">ts_c</a></span><span class="op">(</span><span class="va">gdp.d.stocks</span>, <span class="va">gdp.q</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Daily disaggregated GDP"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"one indicator"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="hf-disagg_files/figure-html/unnamed-chunk-9-1.png" width="681.6"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christoph Sax, Peter Steiner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
